{% extends "base.html" %}
{% import "_pagination.html" as pg %}
{% block title %}Oligosets{% endblock %}

{% block content %}
    <div id="header-row" class="row-fluid">
        <div class="span12">
            <h1>
            {% if g.experiment_num is not none %}Oligosets in Exp #{{ g.experiment_num }}, {{ g.experiment_name }}
            {% else %}
            Browse Oligosets
            {% endif %}
            </h1>
        </div>
    </div>

    <div id="filter-row" class="row-fluid">
        <form id="filter-form" class="form form-inline" action="{{ url_for('oligosets') }}" method="get">
        {{ pg.render_pagination() }}
        <input id="search-term" placeholder="Search term(s)" name="term" type="text" onclick="this.select()" class="form-control" value="{{ g.term if g.term is defined and g.term is not none }}">
        <select label="taxa" id="search-taxa" name="taxonomy" class="form-control">
            <option value="" {% if g.taxonomy is undefined %}selected{% endif %}></option>
            {% for t in g.taxa %}<option value="{{ t }}" {% if t == g.taxonomy %}selected{% endif %}>{{ t }}</option>{% endfor %}
        </select>
        <button id="search-button" type="submit" class="btn btn-default">Filter</button>
        </form>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th></th>
                        <th>id</th>
                        <th>oligoset name</th>
                        <th>gene symbol</th>
                        <th>gene name</th>
                        <th>date</th>
                    </tr>
                </thead>
                <tbody>

                {% for i in g.pagination.items %}
                    <tr>
                        <td>{% if current_user.is_authenticated() %}<a href="javascript://" onclick="Sijax.request('to_benchtop', [{{ i.id }}]);">&#8593;</a>{% endif %}</td>
                        <td><nobr>{{ i.target.taxonomy}}-{{ i.tmid }}</nobr></td>
                        <td>
                            <a href="{{ url_for('oligoset_detail', taxatmid=[i.target.taxonomy, i.tmid]|join('-')) }}">{{ i.name }}</a>
                        </td>
                        <td>{{ i.target.symbol }}</td>
                        <td>{{ i.target.namelong }}</td>
                        <td>{{ i.date|isodate }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>


{#    <script type=text/javascript>#}
{#    $(".addoligoset").click(function (event)#}
{#    {#}
{#       event.preventDefault();#}
{#       var id = $(this).attr('id');#}
{##}
{#       var tubename = $.getJSON('/_oligoset_to_benchtop', {#}
{#        id: id#}
{#        }, function(data) {#}
{#        alert(data.name);#}
{#      });#}
{##}
{##}
{#     });#}
{#     </script>#}


{% endblock %}



