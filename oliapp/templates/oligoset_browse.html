{% extends "base.html" %}
{% import "_pagination.html" as pg %}
{% block title %}Oligosets{% endblock %}

{% block content %}
    <div id="header-row" class="row-fluid">
        <div class="span12">
            {% if g.experiment_num is not none %}
                <h1>Oligosets in Exp #{{ g.experiment_num }}, {{ g.experiment_name }}</h1>
                <h3>{{g.pagination.total}} oligosets total</h3>
            {% else %}
                <h1>Browse Oligosets</h1>
            {% endif %}
        </div>
    </div>

    <div id="filter-row" class="row-fluid">
        <form id="filter-form" class="form form-inline" action="{{ url_for('oligosets') }}" method="get">
        {{ pg.render_pagination() }}
        <input id="search-term" placeholder="Search term(s)" name="term" type="text" onclick="this.select()" class="form-control" value="{{ g.term if g.term is defined and g.term is not none }}">
        <select label="taxa" id="search-taxa" name="taxonomy" class="form-control">
            <option value="" {% if g.taxonomy is undefined %}selected{% endif %}></option>
            {% for t in g.taxa %}<option value="{{ t }}" {% if t == g.taxonomy %}selected{% endif %}>{{ t }}</option>{% endfor %}
        </select>
        <button id="search-button" type="submit" class="btn btn-default">Filter</button>
        </form>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th></th>
                        <th>id</th>
                        <th>oligoset name</th>
                        <th>gene symbol</th>
                        <th>gene name</th>
                        <th>date</th>
                    </tr>
                </thead>
                <tbody>

                {% for i in g.pagination.items %}
                    <tr>
                        <td>{% if current_user.is_authenticated() %}<a href="javascript://" onclick="Sijax.request('to_benchtop', [{{ i.id }}]);">&#8593;</a>{% endif %}</td>
                        <td><a href="{{ url_for('oligoset_detail', taxatmid=[i.target.taxonomy, i.tmid]|join('-')) }}"><nobr>{{ i.target.taxonomy}}-{{ i.tmid }}</nobr></a></td>
                        <td>{{ i.name }}</td>
                        <td>{{ i.target.symbol }}</td>
                        <td>{{ i.target.namelong }}</td>
                        <td><nobr>{{ i.date|isodate }}</nobr></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>


{% endblock %}



